!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_"),require("tartan")):"function"==typeof define&&define.amd?define(["_","tartan"],t):"object"==typeof exports?exports.tartanRender=t(require("_"),require("tartan")):e.tartanRender=t(e._,e.tartan)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1),o=r(2),a=r(3),f=r(4);n.extend(e.exports,r(5)),e.exports.canvas=a,e.exports.houseOfTartan=f,o.render.canvas=a,o.render.houseOfTartan=f},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e,t){return t.repeat||(e.clearRect(0,0,t.width,t.height),t.width=Math.min(t.width,t.warp.lengthOfPattern),t.height=Math.min(t.height,t.warp.lengthOfPattern)),t}function o(e,t){var r,n,o,a=t.warp.pattern,f=t.zoom,i=t.offset.x;for(r=0;r<a.length;r++){if(o=a[r],i+o[1]*f>0){n=r;break}i+=o[1]*f}for(;i<=t.width;){for(r=n;r<a.length&&(o=a[r],e.fillStyle=o[0],e.fillRect(i,0,o[1]*f,t.height),i+=o[1]*f,!(i>=t.width));r++);if(n=0,!t.repeat)break}}function a(e,t){var r,n,o,a,f,i=t.weft.pattern,l=t.zoom,s=t.offset.y,u=t.offset.x,c=t.offset.y,p=h.sum(t.weave);for(r=0;r<i.length;r++){if(a=i[r],s+a[1]*l>0){o=r;break}s+=a[1]*l}for(e.setLineDash(h.map(t.weave,function(e){return e*l}));s<=t.height;){for(r=o;r<i.length;r++){for(a=i[r],e.strokeStyle=a[0],n=s<0?0:s,s+=a[1]*l,n;n<s;n++)f=p-Math.floor((n-c)/l)%p,f=f*l-u,e.lineDashOffset=f,e.beginPath(),e.moveTo(0,n+.5),e.lineTo(t.width,n+.5),e.stroke();if(s>=t.height)break}if(o=0,!t.repeat)break}}function f(e,t){return h.isArray(e)&&2==e.length?e:t}function i(e,t,r,n){var o=h.isObject(e)&&e.isBlock?e.items:[],a=[];o.length>0&&(a=p.utils.sett.compile(o,r,n));var f=p.utils.sett.getPatternMetrics(a,t);return{pattern:a,lengthOfPattern:f.length,lengthOfCycle:f.fullCycle}}function l(e,t,r,n){var o=0,a=0;return h.isObject(e)&&(o=parseInt(e.x,10)||0,a=parseInt(e.y,10)||0),o%=t.lengthOfCycle*n,o>0&&(o-=t.lengthOfCycle*n),a%=r.lengthOfCycle*n,a>0&&(a-=r.lengthOfCycle*n),{x:o,y:a}}function s(e,t,r){return{weave:e,warp:{length:t.lengthOfPattern,fullCycle:t.lengthOfCycle},weft:{length:r.lengthOfPattern,fullCycle:r.lengthOfCycle}}}function u(e){var t=e.offsetWidth,r=e.offsetHeight;if(t>0&&r>0){var n=e.getContext("2d");n.clearRect(0,0,t,r)}return{x:0,y:0}}function c(e,t){if(!h.isObject(e))return u;t=h.merge({},g,t);var r=t.hooks;h.isObject(t.hooks)||(r=t.hooks={}),h.each(g.hooks,function(e,t){h.isFunction(r[t])||(r[t]=g.hooks[t])}),h.isFunction(t.transformSyntaxTree)&&(e=t.transformSyntaxTree(e));var c=parseInt(t.zoom,10)||0;c<1&&(c=1);var p=e.weft===e.warp,d=f(t.weave,g.weave),v=i(e.warp||e.weft,d,e.colors,t.defaultColors),w=v;if(p||(w=i(e.weft||e.warp,d,e.colors,t.defaultColors)),0==v.lengthOfPattern&&0==w.lengthOfPattern)return u;var x=function(e,t,f){f=2==arguments.length||!!f,t=f?l(t,v,w,c):{x:0,y:0};var i={warp:v,weft:w,weave:d,zoom:c,width:Math.ceil(parseFloat(e.width)||0),height:Math.ceil(parseFloat(e.height)||0),offset:t,repeat:f,canvas:e};if(r.configure(e,i),i.width>0&&i.height>0){var s=e.getContext("2d");r.render(s,i,!1),r.clear(s,i,!1),i=n(s,i),r.clear(s,i,!0),r.renderWarp(s,i,!1),o(s,i),r.renderWarp(s,i,!0),r.renderWeft(s,i,!1),a(s,i),r.renderWeft(s,i,!0),r.render(s,i,!0)}return t};return x.metrics=s(d,v,w),x}var h=r(1),p=r(2),g={weave:p.defaults.weave.serge,zoom:1,defaultColors:null,transformSyntaxTree:null,hooks:{configure:function(e){},clear:function(e,t,r){},render:function(e,t,r){},renderWarp:function(e,t,r){},renderWeft:function(e,t,r){}}};u.metrics=s(g.weave,i(null,g.weave,{},{}),i(null,g.weave,{},{})),e.exports=c,Object.defineProperty(e.exports,"id",{enumerable:!0,value:"canvas"}),Object.defineProperty(e.exports,"name",{enumerable:!0,value:"Simple"})},function(e,t,r){"use strict";function n(e,t,r){if(r&&2==t.zoom){var n=t.offset.x,o=t.offset.y;e.save(),e.translate(n,o),e.fillStyle=e.createPattern(l,"repeat"),e.fillRect(-n,-o,t.width,t.height),e.restore()}}function o(e,t){return f(e,a.extend(t,{weave:i.defaults.weave.serge,zoom:2,hooks:{renderWeft:n}}))}var a=r(1),f=r(3),i=r(2),l=new Image;l.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABHNCSVQICAgIfAhkiAAAAFVJREFUGJV1jsENgEAIBGcTCvBrJbbi90qgEuu6buwAHx4mKjcfkg0MS0Qs3KyA5xy5m6TGmwPokk4AcnNm0gidPxvQn4uZyb4/i051+zQZsFft03QB/booYDTfo3wAAAAASUVORK5CYII=",e.exports=o,Object.defineProperty(e.exports,"id",{enumerable:!0,value:"house-of-tartan"}),Object.defineProperty(e.exports,"name",{enumerable:!0,value:"House of Tartan"})},function(e,t){e.exports={version:"1.0.0"}}])});
//# sourceMappingURL=tartan-render.min.js.map